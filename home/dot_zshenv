# XDG Base Directory specification
# https://specifications.freedesktop.org/basedir-spec/latest/
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"

# XDG system directories
export XDG_DATA_DIRS="${XDG_DATA_DIRS:-/usr/local/share:/usr/share}"
export XDG_CONFIG_DIRS="${XDG_CONFIG_DIRS:-/etc/xdg}"

# Add bun global bin directory to PATH if not already present
if [[ -d "$HOME/.cache/.bun/bin" && ":$PATH:" != *":$HOME/.cache/.bun/bin:"* ]]; then
  export PATH="$HOME/.cache/.bun/bin:$PATH"
fi

# Add ~/.local/bin to front of PATH if not already present
if [[ -d "$HOME/.local/bin" && ":$PATH:" != *":$HOME/.local/bin:"* ]]; then
  export PATH="$HOME/.local/bin:$PATH"
fi

# Source cargo environment for Rust toolchain
if [[ -f "$HOME/.cargo/env" ]]; then
  source "$HOME/.cargo/env"
fi

# Editor configuration
export EDITOR="nvim"

# Pager configuration
export PAGER="less"
export LESS="-FRX"

# NPM security hardening - disable postinstall scripts for global CLI tools
export NPM_CONFIG_IGNORE_SCRIPTS=1

# 1Password SSH Agent (for tools that don't read ~/.ssh/config like jj)
# This ensures SSH_AUTH_SOCK points to 1Password's agent on macOS
if [[ "$OSTYPE" == darwin* ]]; then
  export SSH_AUTH_SOCK="$HOME/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
fi
